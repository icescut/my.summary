# python列表

列表是一组有顺序的元素的集合。python的`list`类型表示列表，可以往其中插入、删除、查找元素，就其功能而言，比`C++`、`Java`的数组要强大。  
特点：
1. 可以往列表中插入所有类型的对象，包括复杂类型，如列表、字典、对象。  
2. 列表是有顺序的，每个位置上的元素都有一个索引值，从0开始。  
3. 列表的大小是理论上无限的，只受到计算机的物理限制（比如内存大小）。  

大纲：
* 定义列表
* 索引
* 类型转换
* 增
* 删
* 改
* 查
* 切片
* 排序
* 其它
* 列表推导式

## 定义列表
使用中括号定义一个列表。   
```python
>>> li = [1, 2, 3, "a", "b"]
>>> li[0]
1
>>> li[2]
3
>>> li[1] = 6
>>> li
[1, 6, 3, 'a', 'b']
```

### 空列表
使用`[]`或`list()`定义空列表。  
```python
>>> a = []
>>> len(a)
0
>>> a = list()
>>> len(a)
0
>>> type(a)
<class 'list'>
```

### 加法和乘法
列表加法，相当于将两个列表按顺序连接。但不改变原列表。  
```python
>>> x = [1, 3, 5]
>>> y = [2, 4, 6]
>>> z = x + y
>>> z
[1, 3, 5, 2, 4, 6]
>>> x
[1, 3, 5]
>>> y
[2, 4, 6]
```

列表乘法，左操作数必须是列表，右操作数必须是整型。相当于将列表重复。  
```python
>>> x = [1, 3, 5]
>>> z = x * 3
>>> z
[1, 3, 5, 1, 3, 5, 1, 3, 5]
>>> x
[1, 3, 5]
```

### python基本操作
1. 使用`len`函数返回列表中元素的个数。  
2. 使用`in`和`not in`关键字判断元素是否在列表中

```python
>>> x = list(range(10))
>>> x
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> len(x)
10
>>> 5 in x
True
>>> 5.5 in x
False
```

## 索引
使用列表名加中括号就可以引用列表中的元素，而中括号中的数字就是索引。  
索引只能是整型，列表中第一个元素的索引为0，第二个元素的索引为1，如此类推。  
可以使用负数索引，-1表示最后一个元素，-2表示倒数第二个元素，如此类推。实际上`li[-n] = li[len(li) - n]`。   

## 类型转换
可以使用内置的`list`函数将其他可迭代对象转换为列表。
```python
>>> li = list(range(10))
>>> li
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> li2 = list((1, 2, 3))
>>> li2
[1, 2, 3]
>>> li3 = list("hello")
>>> li3
['h', 'e', 'l', 'l', 'o']
```

## 增
把一个元素添加到列表的末尾，使用`append`方法。  
```python
>>> x = [2, 4, 6, 8]
>>> x.append(10)
>>> x
[2, 4, 6, 8, 10]
```

将一个列表的所有元素添加到当前列表的末尾，使用`extend`方法。  
```python
>>> x = [1, 2, 3]
>>> y = ['hello', 'world']
>>> x.extend(y)
>>> x
[1, 2, 3, 'hello', 'world']
```

在列表任何位置插入元素，后面的元素通通后移一位。  
```python
>>> x
[1, 2, 3, 'hello', 'world']
>>> x.insert(2, 'hi')
>>> x
[1, 2, 'hi', 3, 'hello', 'world']
```

## 删
使用关键字`del`删除其中一个元素。  
```python
>>> x
[1, 2, 'hi', 3, 'hello', 'world']
>>> del x[2]
>>> x
[1, 2, 3, 'hello', 'world']
```

`remove`方法根据找到的第一个匹配删除值，但如果找不到值会报错。  
```python
>>> x = [1, 2, 3, 2, 4, 6]
>>> r = x.remove(2)
>>> print(r)
None
>>> x
[1, 3, 2, 4, 6]
```

`pop`方法根据索引删除值，如果不给参数则为删除最后一个元素，如果列表为空或者参数值不在范围内会报`IndexError`。  
```python
>>> x = [1, 2, 3, 2, 4, 6]
>>> a = x.pop(1)
>>> a
2


>>> x
[1, 3, 2, 4, 6]
>>> a = x.pop()
>>> a
6
>>> x
[1, 3, 2, 4]
>>> x.pop(4)
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    x.pop(4)
IndexError: pop index out of range
```

另外使用`clear`可以原地清空列表，注意与`x = []`不同，前者是原地清空，后者则为改变`x`的指向，指向一个新的空列表。  

## 改
使用索引可以直接更改索引位置的元素值。  
```python
>>> x = [1, 2, 2, 4]
>>> x[2] = 3
>>> x
[1, 2, 3, 4]
```

## 查
使用索引可以直接根据索引查找该位置的值。  
```python
>>> x = [2, 4, 6, 8, 10]
>>> x[2]
6
```
使用`index(value [,start [,end]])`可以根据值来返回元素的索引。默认是从列表的从头搜索到结尾，也可以指定搜索范围，即可选的start和end参数。  
```python
>>> x = [1, 2, 3, 2, 4, 6]
>>> x.index(2)
1
>>> x.index(2, 2, 4)
3
>>> x.index(7)
Traceback (most recent call last):
  File "<pyshell#20>", line 1, in <module>
    x.index(7)
ValueError: 7 is not in list
```   


## 切片
切片即为获得一部分列表，通过指定开始索引、结束索引、步长来设置切片。遵守左闭右开的原则。  

```python
>>> li = list(range(10))
>>> li
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> li[5:8]
[5, 6, 7]
>>> li[2:9:2]
[2, 4, 6, 8]
```
一般结束索引要比开始索引要大，否则返回空列表。  
```python
>>> li[5:5]
[]
>>> li[7:2]
[]
```

### 负数索引的切片
负数同样可以用于切片。
```python
>>> li[-3:-1]
[7, 8]
```

### 负数步长的切片
这时开始索引要比结束索引要大。   
```python
>>> li[8:2:-1]
[8, 7, 6, 5, 4, 3]
>>> li[-2:-8:-1]
[8, 7, 6, 5, 4, 3]
>>> li[2:8:-1]
[]
```

### 步长不能为0
```python
>>> li[2:8:0]
Traceback (most recent call last):
  File "<pyshell#15>", line 1, in <module>
    li[2:8:0]
ValueError: slice step cannot be zero
```
索引可以超出列表的左右边界，这时默认调整为左右边界。  
```python
>>> li[2:20]
[2, 3, 4, 5, 6, 7, 8, 9]
>>> li[-100:3]
[0, 1, 2]
```

### 简写
* 省略开始索引则为列表的左边界（即0）
* 省略结束索引则为列表的右边界（即最后一个元素）
* 省略开始和结束索引则为整个列表
```python
>>> li[:5]
[0, 1, 2, 3, 4]
>>> li[3:]
[3, 4, 5, 6, 7, 8, 9]
>>> li[:]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### 切片修改
可以通过切片对列表进行范围修改。  
```python
>>> x = list(range(10))
>>> x
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> x[1:5] = [-1, -2, -3, -4]
>>> x
[0, -1, -2, -3, -4, 5, 6, 7, 8, 9]
```

修改的个数可以不一样。  

```python
>>> x[1:5] = [1]
>>> x
[0, 1, 5, 6, 7, 8, 9]
```

基本可以是空列表，实际为通过切片删除。
```python
>>> x[1:3] = []
>>> x
[0, 6, 7, 8, 9]
```

但上述操作必须在步长为1的情况下。否则，赋值的个数必须与切片的个数一致。  
```python
>>> x[::2]
[0, 7, 9]
>>> x[::2] = [1, 8, 10]
>>> x
[1, 6, 8, 8, 10]
>>> x[::2] = [5, 6]
Traceback (most recent call last):
  File "<pyshell#33>", line 1, in <module>
    x[::2] = [5, 6]
ValueError: attempt to assign sequence of size 2 to extended slice of size 3
```

### slice
切片实际上是slice对象，但切片一般很少重用，所以也没什么必要创建slice对象。  

```python
>>> x = list(range(10))
>>> x
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> x[1:5]
[1, 2, 3, 4]
>>> s1 = slice(1,5)
>>> x[s1]
[1, 2, 3, 4]
>>> x[1:10:2]
[1, 3, 5, 7, 9]
>>> s2 = slice(1,10,2)
>>> x[s2]
[1, 3, 5, 7, 9]
```

## 排序
列表方法`sort(key=None, reverse=False)`对列表进行原地排序。可选参数key用于接收一个方法用于对列表排序，reverse用于接收布尔值决定是否逆序。  

```python
>>> x = ['Ken', 'Alice', 'Bob', 'Michael']
>>> x.sort()
>>> x
['Alice', 'Bob', 'Ken', 'Michael']
>>> x = ['Ken', 'Alice', 'Bob', 'Michael']
>>> x.sort(key=len)
>>> x
['Ken', 'Bob', 'Alice', 'Michael']
>>> x = ['Ken', 'Alice', 'Bob', 'Michael']
>>> x.sort(reverse=True)
>>> x
['Michael', 'Ken', 'Bob', 'Alice']
```

如果不想改变原列表，可以复制一份再排序或者使用`sorted`函数。  
```python
>>> x = ['Ken', 'Alice', 'Bob', 'Michael']
>>> y = x[:]
>>> y.sort()
>>> y
['Alice', 'Bob', 'Ken', 'Michael']
>>> x
['Ken', 'Alice', 'Bob', 'Michael']
>>> sorted(x)
['Alice', 'Bob', 'Ken', 'Michael']
```

## 其它

### 堆栈
使用`append`及`pop`方法可以实际堆栈的push及pop。  

### 计数
使用`count`方法返回列表中某个元素出现的次数。  
```python
>>> a = [11, 12, 13, 12, 11]
>>> a.count(11)
2
```

### 逆向
使用`reverse`将列表逆向，是原地操作。  
```python
>>> x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> x.reverse()
>>> x
[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
```

## 列表推导式
列表推导式是使用其他列表创建新列表。  
语法格式为：
`[表达式 for 变量 in 列表]`或者`[表达式 for 变量 in 列表 if 条件]`  
循环处理列表中的每个元素，如果满足条件，则执行表达式，并将结果放入新的列表中。  

```python
>>> squares = [x**2 for x in range(10)]
>>> squares
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
>>> squares = [x**2 for x in range(10) if x % 2 == 0]
>>> squares
[0, 4, 16, 36, 64]
```
### 嵌套
可以对列表推导式进行嵌套，实际类似双重循环的效果。
```python
>>> [[row[col] for row in matrix] for col in range(4)]
[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]
```
